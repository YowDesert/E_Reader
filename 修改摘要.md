# E_Reader ç¨‹å¼ç¢¼ä¿®æ”¹æ‘˜è¦

## ä¸»è¦ä¿®æ”¹å…§å®¹

### 1. ç§»é™¤é›¢é–‹åŠŸèƒ½å’Œæª”æ¡ˆç®¡ç†å™¨æŒ‰éˆ•
- âœ… **ç§»é™¤äº†ã€ŒâŒ é›¢é–‹ã€æŒ‰éˆ•** - å¾ä¸Šæ–¹æ§åˆ¶åˆ—ä¸­ç§»é™¤é›¢é–‹æŒ‰éˆ•
- âœ… **ç§»é™¤äº†ã€ŒğŸ—„ï¸ æª”æ¡ˆç®¡ç†å™¨ã€æŒ‰éˆ•** - é¿å…é‡è¤‡åŠŸèƒ½ï¼Œå› ç‚ºå·²ç¶“æœ‰è¿”å›æŒ‰éˆ•

### 2. ä¿®æ­£è¿”å›æª”æ¡ˆç®¡ç†æŒ‰éˆ•åŠŸèƒ½
- âœ… **ä¿®å¾©äº† BorderPane Scene é‡è¤‡å‰µå»ºéŒ¯èª¤** - ä½¿ç”¨å–®ä¾‹æ¨¡å¼é¿å…é‡è¤‡å‰µå»ºæª”æ¡ˆç®¡ç†å™¨
- âœ… **æ”¹é€²äº†æŒ‰éˆ•åŠŸèƒ½** - ã€Œâ†©ï¸ è¿”å›æª”æ¡ˆç®¡ç†ã€æŒ‰éˆ•ç¾åœ¨èƒ½æ­£ç¢ºé¡¯ç¤ºæª”æ¡ˆç®¡ç†å™¨

### 3. æª”æ¡ˆç®¡ç†å™¨æ”¹é€²
- âœ… **å¯¦ç¾å–®ä¾‹æ¨¡å¼** - FileManagerController ç¾åœ¨ä½¿ç”¨å–®ä¾‹æ¨¡å¼ï¼Œé¿å…é‡è¤‡å‰µå»º
- âœ… **æ”¹é€² show() æ–¹æ³•** - æª¢æŸ¥ Scene æ˜¯å¦å·²å­˜åœ¨ï¼Œé¿å…é‡è¤‡å‰µå»º
- âœ… **è¦–çª—ç‹€æ…‹ç®¡ç†** - æ­£ç¢ºè™•ç†è¦–çª—çš„é¡¯ç¤ºã€éš±è—å’Œç½®å‰æ“ä½œ

## ä¿®æ”¹çš„æª”æ¡ˆ

### 1. `UIControlsFactory.java`
```java
// ä¿®æ”¹å‰ï¼š
Button fileManagerBtn = createButton("ğŸ—„ï¸ æª”æ¡ˆç®¡ç†å™¨", controller::showFileManager);
Button exitBtn = createButton("âŒ é›¢é–‹", () -> controller.getPrimaryStage().close());

// ä¿®æ”¹å¾Œï¼š
// ç§»é™¤äº†ä¸Šè¿°å…©å€‹æŒ‰éˆ•ï¼Œåªä¿ç•™è¿”å›æª”æ¡ˆç®¡ç†æŒ‰éˆ•
Button returnToManagerBtn = createButton("â†©ï¸ è¿”å›æª”æ¡ˆç®¡ç†", () -> {
    controller.getFileManagerController().show();
});
```

### 2. `FileManagerController.java`
```java
// æ–°å¢å–®ä¾‹æ¨¡å¼
private static FileManagerController instance;

private FileManagerController() {
    this.primaryStage = new Stage();
    // ...
}

public static FileManagerController getInstance() {
    if (instance == null) {
        instance = new FileManagerController();
    }
    return instance;
}

// æ”¹é€² show() æ–¹æ³•
public void show() {
    if (primaryStage.getScene() == null) {
        Scene scene = new Scene(mainLayout);
        primaryStage.setScene(scene);
    }
    // ...
}
```

### 3. `MainController.java`
```java
// ä¿®æ”¹å¯¦ä¾‹åŒ–æ–¹å¼
this.fileManagerController = FileManagerController.getInstance();
```

## è§£æ±ºçš„å•é¡Œ

### åŸéŒ¯èª¤è¨Šæ¯ï¼š
```
Exception in thread "JavaFX Application Thread" java.lang.IllegalArgumentException: 
BorderPane@76e5d42a[styleClass=root]is already set as root of another scene
```

### è§£æ±ºæ–¹æ¡ˆï¼š
1. **å–®ä¾‹æ¨¡å¼** - ç¢ºä¿åªå‰µå»ºä¸€å€‹ FileManagerController å¯¦ä¾‹
2. **Scene æª¢æŸ¥** - åœ¨ show() æ–¹æ³•ä¸­æª¢æŸ¥æ˜¯å¦å·²æœ‰ Scene
3. **è¦–çª—ç‹€æ…‹ç®¡ç†** - æ­£ç¢ºè™•ç†è¦–çª—çš„é¡¯ç¤º/éš±è—ç‹€æ…‹

## åŠŸèƒ½èªªæ˜

### æŒ‰éˆ•åŠŸèƒ½
- **â†©ï¸ è¿”å›æª”æ¡ˆç®¡ç†** - é¡¯ç¤ºæª”æ¡ˆç®¡ç†å™¨è¦–çª—ï¼Œå¯ä»¥é¸æ“‡å…¶ä»–æª”æ¡ˆ
- **ğŸ”– æ›¸ç±¤ç®¡ç†** - ç®¡ç†é–±è®€æ›¸ç±¤
- **âš™ï¸ è¨­å®š** - æ‡‰ç”¨ç¨‹å¼è¨­å®š
- **ğŸ“– æ–‡å­—æ¨¡å¼** - åˆ‡æ›æ–‡å­—/åœ–ç‰‡æ¨¡å¼
- **â¯ï¸ è‡ªå‹•ç¿»é ** - å•Ÿç”¨è‡ªå‹•ç¿»é åŠŸèƒ½
- **ğŸŒ™ å¤œé–“æ¨¡å¼** - åˆ‡æ›å¤œé–“æ¨¡å¼
- **ğŸ‘ï¸ è­·çœ¼æ¨¡å¼** - å•Ÿç”¨è­·çœ¼æ¨¡å¼
- **ğŸ”² å…¨è¢å¹•** - åˆ‡æ›å…¨è¢å¹•æ¨¡å¼

### ä½¿ç”¨èªªæ˜
1. **é–‹å•Ÿæ‡‰ç”¨ç¨‹å¼** - ç¨‹å¼æœƒé¡¯ç¤ºæª”æ¡ˆç®¡ç†å™¨
2. **é¸æ“‡æª”æ¡ˆ** - é›™æ“Šæª”æ¡ˆé–‹å•Ÿé–±è®€å™¨
3. **è¿”å›æª”æ¡ˆç®¡ç†** - é»æ“Šã€Œâ†©ï¸ è¿”å›æª”æ¡ˆç®¡ç†ã€æŒ‰éˆ•
4. **åˆ‡æ›æª”æ¡ˆ** - åœ¨æª”æ¡ˆç®¡ç†å™¨ä¸­é¸æ“‡å…¶ä»–æª”æ¡ˆ

## æ³¨æ„äº‹é …

- æª”æ¡ˆç®¡ç†å™¨ä½¿ç”¨å–®ä¾‹æ¨¡å¼ï¼Œæ•´å€‹æ‡‰ç”¨ç¨‹å¼ç”Ÿå‘½é€±æœŸä¸­åªæœƒå‰µå»ºä¸€æ¬¡
- è¿”å›æª”æ¡ˆç®¡ç†å™¨æ™‚ï¼Œè¦–çª—æœƒè¢«éš±è—è€Œä¸æ˜¯é—œé–‰ï¼Œä»¥æé«˜æ€§èƒ½
- æ‰€æœ‰è¦–çª—ç‹€æ…‹éƒ½æœƒè¢«æ­£ç¢ºä¿å­˜å’Œæ¢å¾©

## æ¸¬è©¦å»ºè­°

1. **ç·¨è­¯æ¸¬è©¦** - é‹è¡Œ `test_compilation.bat` ç¢ºèªç·¨è­¯æˆåŠŸ
2. **åŠŸèƒ½æ¸¬è©¦** - æ¸¬è©¦è¿”å›æª”æ¡ˆç®¡ç†æŒ‰éˆ•æ˜¯å¦æ­£å¸¸å·¥ä½œ
3. **å¤šæ¬¡åˆ‡æ›æ¸¬è©¦** - å¤šæ¬¡åœ¨é–±è®€å™¨å’Œæª”æ¡ˆç®¡ç†å™¨ä¹‹é–“åˆ‡æ›
4. **æª”æ¡ˆé–‹å•Ÿæ¸¬è©¦** - æ¸¬è©¦é–‹å•Ÿä¸åŒé¡å‹çš„æª”æ¡ˆï¼ˆPDFã€åœ–ç‰‡ï¼‰

## å¯èƒ½çš„æ”¹é€²

1. **è¨˜æ†¶è¦–çª—ä½ç½®** - è¨˜ä½æª”æ¡ˆç®¡ç†å™¨å’Œé–±è®€å™¨çš„è¦–çª—ä½ç½®
2. **å¿«æ·éµæ”¯æ´** - ç‚ºè¿”å›æª”æ¡ˆç®¡ç†å™¨æ·»åŠ å¿«æ·éµï¼ˆå¦‚ Ctrl+Oï¼‰
3. **æœ€è¿‘æª”æ¡ˆ** - åœ¨æª”æ¡ˆç®¡ç†å™¨ä¸­é¡¯ç¤ºæœ€è¿‘é–‹å•Ÿçš„æª”æ¡ˆ
