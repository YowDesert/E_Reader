# E_Reader ç¨‹å¼ç¢¼é‡æ§‹èªªæ˜

## æ–°çš„ç¨‹å¼ç¢¼çµæ§‹

ç¨‹å¼ç¢¼å·²ç¶“é‡æ–°çµ„ç¹”ï¼Œæ¡ç”¨æ›´æ¸…æ™°çš„æ¨¡çµ„åŒ–æ¶æ§‹ï¼Œè®“ä»£ç¢¼æ›´æ˜“æ–¼ç¶­è­·å’Œæ“´å±•ã€‚

### ğŸ“ åŒ…çµæ§‹èªªæ˜

```
E_Reader/
â”œâ”€â”€ Main.java                    # ä¸»ç¨‹å¼å…¥å£ï¼ˆç°¡åŒ–ç‰ˆï¼‰
â”œâ”€â”€ Main_New.java               # æ–°ç‰ˆä¸»ç¨‹å¼ï¼ˆæ¨è–¦ä½¿ç”¨ï¼‰
â”œâ”€â”€ Launcher.java               # å•Ÿå‹•å™¨ï¼ˆä¿æŒä¸è®Šï¼‰
â”‚
â”œâ”€â”€ ğŸ“ ui/                      # ç”¨æˆ¶ç•Œé¢å±¤
â”‚   â”œâ”€â”€ MainController.java    # ä¸»æ§åˆ¶å™¨ï¼ˆå”èª¿å„çµ„ä»¶ï¼‰
â”‚   â””â”€â”€ UIControlsFactory.java # UIæ§åˆ¶å…ƒä»¶å·¥å» 
â”‚
â”œâ”€â”€ ğŸ“ core/                    # æ ¸å¿ƒæ¥­å‹™é‚è¼¯å±¤
â”‚   â”œâ”€â”€ StateManager.java      # ç‹€æ…‹ç®¡ç†å™¨
â”‚   â”œâ”€â”€ TimerManager.java      # è¨ˆæ™‚å™¨ç®¡ç†å™¨
â”‚   â”œâ”€â”€ ImageLoader.java       # åœ–ç‰‡è¼‰å…¥å™¨
â”‚   â”œâ”€â”€ PdfLoader.java          # PDFè¼‰å…¥å™¨
â”‚   â”œâ”€â”€ TextExtractor.java     # æ–‡å­—æå–å™¨
â”‚   â””â”€â”€ BookmarkManager.java   # æ›¸ç±¤ç®¡ç†å™¨
â”‚
â”œâ”€â”€ ğŸ“ viewer/                  # æª¢è¦–å™¨å±¤
â”‚   â”œâ”€â”€ ImageViewer.java       # åœ–ç‰‡æª¢è¦–å™¨
â”‚   â””â”€â”€ TextRenderer.java      # æ–‡å­—æ¸²æŸ“å™¨
â”‚
â”œâ”€â”€ ğŸ“ settings/                # è¨­å®šç®¡ç†å±¤
â”‚   â””â”€â”€ SettingsManager.java   # è¨­å®šç®¡ç†å™¨
â”‚
â””â”€â”€ ğŸ“ utils/                   # å·¥å…·é¡å±¤
    â””â”€â”€ AlertHelper.java       # æé†’å°è©±æ¡†å·¥å…·
```

## ğŸ”„ é‡æ§‹æ”¹é€²

### 1. **æ¨¡çµ„åŒ–è¨­è¨ˆ**
- å°‡é¾å¤§çš„ Main.java åˆ†è§£ç‚ºå¤šå€‹å°ˆé–€çš„é¡åˆ¥
- æ¯å€‹é¡åˆ¥éƒ½æœ‰æ˜ç¢ºçš„è·è²¬åˆ†å·¥
- éµå¾ªå–®ä¸€è·è²¬åŸå‰‡ (Single Responsibility Principle)

### 2. **æ›´å¥½çš„ä¾è³´ç®¡ç†**
- ä½¿ç”¨ä¾è³´æ³¨å…¥æ¨¡å¼ï¼Œæ¸›å°‘é¡åˆ¥é–“çš„è€¦åˆ
- é€šéä»‹é¢å®šç¾©æ˜ç¢ºçš„åˆç´„
- ä¾¿æ–¼å–®å…ƒæ¸¬è©¦å’Œç¶­è­·

### 3. **å¢å¼·çš„éŒ¯èª¤è™•ç†**
- çµ±ä¸€çš„éŒ¯èª¤è™•ç†æ–¹å¼
- æ›´å‹å–„çš„éŒ¯èª¤è¨Šæ¯é¡¯ç¤º
- å®Œå–„çš„ç•°å¸¸è™•ç†æ©Ÿåˆ¶

### 4. **å„ªåŒ–çš„æ•ˆèƒ½**
- æ›´æœ‰æ•ˆç‡çš„è¨ˆæ™‚å™¨ç®¡ç†
- å„ªåŒ–çš„è¨˜æ†¶é«”ä½¿ç”¨
- æ”¹é€²çš„åœ–ç‰‡å’Œæ–‡å­—è™•ç†

## ğŸš€ ä½¿ç”¨æ–°çµæ§‹

### å•Ÿå‹•æ‡‰ç”¨ç¨‹å¼
æ¨è–¦ä½¿ç”¨æ–°çš„å•Ÿå‹•æ–¹å¼ï¼š
```java
// ä½¿ç”¨ Main_New.java æˆ–ç›´æ¥ä½¿ç”¨ MainController
MainController controller = new MainController(primaryStage);
controller.initialize();
```

### æ“´å±•åŠŸèƒ½
è¦æ·»åŠ æ–°åŠŸèƒ½ï¼Œè«‹éµå¾ªä»¥ä¸‹åŸå‰‡ï¼š

1. **UI ç›¸é—œ** â†’ æ”¾åœ¨ `ui` åŒ…
2. **æ ¸å¿ƒé‚è¼¯** â†’ æ”¾åœ¨ `core` åŒ…
3. **æª¢è¦–åŠŸèƒ½** â†’ æ”¾åœ¨ `viewer` åŒ…
4. **è¨­å®šç›¸é—œ** â†’ æ”¾åœ¨ `settings` åŒ…
5. **å·¥å…·æ–¹æ³•** â†’ æ”¾åœ¨ `utils` åŒ…

## ğŸ“‹ ä¸»è¦æ”¹é€²åŠŸèƒ½

### MainController
- çµ±ä¸€å”èª¿å„å€‹çµ„ä»¶
- ç®¡ç†æ‡‰ç”¨ç¨‹å¼ç”Ÿå‘½é€±æœŸ
- è™•ç†ç”¨æˆ¶äº¤äº’äº‹ä»¶

### StateManager
- é›†ä¸­ç®¡ç†æ‡‰ç”¨ç¨‹å¼ç‹€æ…‹
- æä¾›ç‹€æ…‹è®Šæ›´é€šçŸ¥
- ç¢ºä¿ç‹€æ…‹ä¸€è‡´æ€§

### TimerManager
- çµ±ä¸€ç®¡ç†æ‰€æœ‰è¨ˆæ™‚å™¨
- é¿å…è¨ˆæ™‚å™¨æ´©æ¼
- æä¾›æ›´ç²¾ç¢ºçš„æ™‚é–“æ§åˆ¶

### SettingsManager
- å®Œæ•´çš„è¨­å®šç®¡ç†åŠŸèƒ½
- æ”¯æ´ä¸»é¡Œåˆ‡æ›
- è‡ªå‹•å„²å­˜å’Œè¼‰å…¥è¨­å®š

### AlertHelper
- çµ±ä¸€çš„å°è©±æ¡†é¢¨æ ¼
- æ”¯æ´æ·±è‰²ä¸»é¡Œ
- æ›´å‹å–„çš„éŒ¯èª¤æç¤º

## ğŸ”§ é·ç§»æŒ‡å—

### å¾èˆŠç‰ˆæœ¬é·ç§»
1. å°‡ `Main.java` é‡å‘½åç‚º `Main_Old.java`ï¼ˆå‚™ä»½ï¼‰
2. å°‡ `Main_New.java` é‡å‘½åç‚º `Main.java`
3. æ›´æ–° import èªå¥ä»¥ä½¿ç”¨æ–°çš„åŒ…çµæ§‹
4. æ¸¬è©¦æ‰€æœ‰åŠŸèƒ½æ˜¯å¦æ­£å¸¸é‹ä½œ

### é–‹ç™¼å»ºè­°
- å„ªå…ˆä½¿ç”¨ MainController ä¾†å”èª¿çµ„ä»¶äº¤äº’
- é€šé StateManager ç®¡ç†æ‡‰ç”¨ç¨‹å¼ç‹€æ…‹
- ä½¿ç”¨ AlertHelper é¡¯ç¤ºç”¨æˆ¶è¨Šæ¯
- éµå¾ªåŒ…çµæ§‹çš„è¨­è¨ˆåŸå‰‡

## ğŸ—‚ï¸ æª”æ¡ˆå°æ‡‰é—œä¿‚

### èˆŠæª”æ¡ˆ â†’ æ–°ä½ç½®
```
Main.java â†’ ui/MainController.java (ä¸»è¦é‚è¼¯)
ImageViewer.java â†’ viewer/ImageViewer.java
TextRenderer.java â†’ viewer/TextRenderer.java
SettingsPanel.java â†’ settings/SettingsManager.java
BookmarkManager.java â†’ core/BookmarkManager.java
ImageLoader.java â†’ core/ImageLoader.java
PdfLoader.java â†’ core/PdfLoader.java
TextExtractor.java â†’ core/TextExtractor.java
AlertHelper.java â†’ utils/AlertHelper.java
```

## ğŸ” ç¨‹å¼ç¢¼å“è³ªæ”¹é€²

### 1. **å¯è®€æ€§æå‡**
- æ›´æ¸…æ™°çš„é¡åˆ¥å‘½å
- å®Œæ•´çš„æ–¹æ³•è¨»é‡‹
- é‚è¼¯åˆ†çµ„æ›´æ˜ç¢º

### 2. **å¯ç¶­è­·æ€§å¢å¼·**
- æ¸›å°‘ä»£ç¢¼é‡è¤‡
- çµ±ä¸€çš„è¨­è¨ˆæ¨¡å¼
- æ›´å¥½çš„éŒ¯èª¤è™•ç†

### 3. **å¯æ“´å±•æ€§æ”¹å–„**
- æ¨¡çµ„åŒ–è¨­è¨ˆä¾¿æ–¼æ·»åŠ æ–°åŠŸèƒ½
- ä»‹é¢å°å‘çš„è¨­è¨ˆ
- é¬†è€¦åˆçš„çµ„ä»¶é—œä¿‚

## ğŸ“ TODO æ¸…å–®

### å³å°‡å®Œæˆçš„åŠŸèƒ½
- [ ] å®Œå–„ UIControlsFactory ä¸­çš„å¾…å¯¦ä½œæ–¹æ³•
- [ ] æ·»åŠ æ›´å¤šçš„ä¸»é¡Œé¸é …
- [ ] å¯¦ä½œè¨­å®šé¢æ¿çš„å°è©±æ¡†
- [ ] å¢åŠ æœå°‹å’Œæ–‡å­—è™•ç†åŠŸèƒ½
- [ ] å„ªåŒ–è¨˜æ†¶é«”ä½¿ç”¨å’Œæ•ˆèƒ½

### é•·æœŸè¦åŠƒ
- [ ] æ·»åŠ æ’ä»¶ç³»çµ±
- [ ] æ”¯æ´æ›´å¤šæª”æ¡ˆæ ¼å¼
- [ ] å¯¦ä½œé›²ç«¯åŒæ­¥åŠŸèƒ½
- [ ] æ·»åŠ ç­†è¨˜å’Œæ¨™è¨»åŠŸèƒ½
- [ ] æ”¯æ´å¤šèªè¨€ä»‹é¢

## ğŸ› ï¸ é–‹ç™¼å·¥å…·å»ºè­°

### IDE è¨­å®š
- ä½¿ç”¨ IntelliJ IDEA æˆ– Eclipse
- é…ç½® JavaFX Scene Builder
- è¨­å®šä»£ç¢¼æ ¼å¼åŒ–è¦å‰‡

### å»ºç½®å·¥å…·
- Maven æˆ– Gradle
- è‡ªå‹•åŒ–æ¸¬è©¦æ¡†æ¶
- ä»£ç¢¼å“è³ªæª¢æŸ¥å·¥å…·

## ğŸ“ æ”¯æ´å’Œè²¢ç»

å¦‚æœæ‚¨åœ¨ä½¿ç”¨æ–°çµæ§‹æ™‚é‡åˆ°å•é¡Œï¼Œæˆ–æœ‰æ”¹é€²å»ºè­°ï¼Œè«‹ï¼š

1. æª¢æŸ¥é€™ä»½æ–‡æª”çš„èªªæ˜
2. æŸ¥çœ‹ä»£ç¢¼ä¸­çš„è¨»é‡‹
3. æ¸¬è©¦åŠŸèƒ½æ˜¯å¦æ­£å¸¸
4. æä¾›åé¥‹å’Œå»ºè­°

---

**é‡æ§‹å®Œæˆæ—¥æœŸ**: 2025å¹´1æœˆ
**ç‰ˆæœ¬**: v3.1 Enhanced
**ä¸»è¦æ”¹é€²**: æ¨¡çµ„åŒ–æ¶æ§‹ã€æ•ˆèƒ½å„ªåŒ–ã€å¯ç¶­è­·æ€§æå‡
